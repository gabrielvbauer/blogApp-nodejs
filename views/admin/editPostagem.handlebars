{{#each errors}}
  <div class="alert alert-danger">{{texto}}</div>
{{else}}

{{/each}}

<div class="card">
  <p class="card-header" style="font-size: 24px;">Editar postagem</p>
  <div class="card-body">
    <form action="/admin/postagem/edit" method="POST">
      <input type="hidden" name="id" value="{{postagem._id}}">
      <label for="titulo">Título:</label>
      <input class="form-control mb-2" type="text" id="titulo" name="titulo" value="{{postagem.titulo}}"
        placeholder="Título da postagem">
      <label for="slug" >Slug:</label>
      <input class="form-control" type="text" id="slug" name="slug" value="{{postagem.slug}}"
        placeholder="Slug da postagem">
      <label for="descricao">Descrição:</label>
      <input class="form-control mb-2" type="text" name="descricao" id="descricao" value="{{postagem.descricao}}" placeholder="Descrição">
      <label for="conteudo">Conteúdo:</label>
      <textarea class="form-control mb-2" name="conteudo" id="conteudo" style="resize: vertical;">{{postagem.conteudo}}</textarea>
      <label for="categoria">Categoria:</label>
      <select class="custom-select" name="categoria" id="categoria">
        {{#each categorias}}
        <option value="{{_id}}">{{nome}}</option>
        {{else}}
        <option value="0">Nenhuma categoria registrada</option>
        {{/each}}
      </select>
      </br>
      
      <a href="/admin/postagens" class="btn btn-secondary">Voltar</a>
      <button type="submit" class="btn btn-success mt-2 mb-2">Atualizar</button>
    </form>
  </div>
</div>

<script>
 document.body.onload = new function(){
  var cat = document.getElementById('categoria')
  var categoriaPost = "{{postagem.categoria._id}}"
  var categoria = cat.options[0].value
  while (categoria != categoriaPost){
   cat.selectedIndex++
   categoria=cat.options[cat.selectedIndex].value
  }
 }
</script>